{"version":3,"file":"history-model.js","sources":["../../../src/mvc/history/history-model.js"],"names":["define","HISTORY_CONTENTS","BASE_MVC","History","Backbone","Model","extend","LoggableMixin","mixin","SearchableModelMixin","defaults","model_class","id","name","state","diskSize","deleted","urlRoot","galaxy_config","root","initialize","historyJSON","contentsJSON","options","this","logger","log","contents","HistoryContents","historyId","get","_setUpListeners","updateTimeoutId","on","model","xhr","msg","details","errorHandler","listenTo","trigger","apply","concat","jQuery","makeArray","arguments","newId","clearUpdateTimeout","ownedByCurrUser","Galaxy","currUser","isAnonymous","contentsCount","_","reduce","values","memo","num","searchAttributes","searchAliases","title","tag","checkForUpdates","onReadyCallback","running","length","setUpdateTimeout","isFunction","call","delay","UPDATE_DELAY","history","setTimeout","refresh","clearTimeout","detailIds","data","join","fetch","done","_delete","when","save","purge","purged","undelete","copy","current","undefined","Error","postData","history_id","post","then","response","newHistory","setAsCurrent","getJSON","toString","getHistoryData","getHistory","ajax","isEmpty","historyData","empty","getContents","detailIdsFn","hdcaDetailIds","dataset_details","dataset_collection_details","df","Deferred","historyFn","contentsFn","historyXHR","json","notify","status","fail","reject","contentsXHR","resolve","HistoryCollection","Collection","window","models","includeDeleted","setUpListeners","collection","debug","remove","original","newData","unshift","create","hdas","historyOptions"],"mappings":"AAAAA,QACI,+BACA,eACA,sBACD,SAAUC,EAAkBC,GAW/B,GAAIC,GAAUC,SAASC,MAAMC,OAAQJ,EAASK,eAAgBD,OACtDJ,EAASM,MAAON,EAASO,sBAM7BC,UACIC,YAAkB,UAClBC,GAAkB,KAClBC,KAAkB,kBAClBC,MAAkB,MAElBC,SAAkB,EAClBC,SAAkB,GAItBC,QAASC,cAAcC,KAAO,gBAQ9BC,WAAa,SAAUC,EAAaC,EAAcC,GAC9CA,EAAUA,MACVC,KAAKC,OAASF,EAAQE,QAAU,KAChCD,KAAKE,IAAKF,KAAO,eAAgBH,EAAaC,EAAcC,GAG5DC,KAAKE,IAAK,6BAA8BJ,GACxCE,KAAKG,SAAW,GAAI1B,GAAiB2B,gBAAiBN,OAAsBO,UAAWL,KAAKM,IAAK,QAOjGN,KAAKO,kBAGLP,KAAKQ,gBAAkB,MAQ3BD,gBAAkB,WACdP,KAAKS,GAAI,QAAS,SAAUC,EAAOC,EAAKZ,EAASa,EAAKC,GAClDb,KAAKc,aAAcJ,EAAOC,EAAKZ,EAASa,EAAKC,KAI7Cb,KAAKG,UACLH,KAAKe,SAAUf,KAAKG,SAAU,QAAS,WACnCH,KAAKgB,QAAQC,MAAOjB,MAAQ,kBAAmBkB,OAAQC,OAAOC,UAAWC,eAIjFrB,KAAKS,GAAI,YAAa,SAAUC,EAAOY,GAC/BtB,KAAKG,WACLH,KAAKG,SAASE,UAAYiB,IAE/BtB,OAWPc,aAAe,WAEXd,KAAKuB,sBAOTC,gBAAkB,WAEd,MAAKC,SAAWA,OAAOC,SAInBD,OAAOC,SAASC,eAAiBF,OAAOC,SAAStC,KAAOY,KAAKM,IAAK,YAC3D,GAEJ,GANI,GAUfsB,cAAgB,WACZ,MAAOC,GAAEC,OAAQD,EAAEE,OAAQ/B,KAAKM,IAAK,kBAAqB,SAAU0B,EAAMC,GAAO,MAAOD,GAAOC,GAAQ,IAK3GC,kBACI,OAAQ,aAAc,QAI1BC,eACIC,MAAc,OACdC,IAAc,QASlBC,gBAAkB,SAAUC,GAcxB,MATIvC,MAAKG,SAASqC,UAAUC,OACxBzC,KAAK0C,oBAGL1C,KAAKgB,QAAS,SACVa,EAAEc,WAAYJ,IACdA,EAAgBK,KAAM5C,OAGvBA,MAIX0C,iBAAmB,SAAUG,GACzBA,EAAQA,GAASlE,EAAQmE,YACzB,IAAIC,GAAU/C,IAOd,OAJAA,MAAKuB,qBACLvB,KAAKQ,gBAAkBwC,WAAY,WAC/BD,EAAQE,WACTJ,GACI7C,KAAKQ,iBAIhBe,mBAAqB,WACbvB,KAAKQ,kBACL0C,aAAclD,KAAKQ,iBACnBR,KAAKQ,gBAAkB,OAS/ByC,QAAU,SAAUE,EAAWpD,GAE3BoD,EAAYA,MACZpD,EAAUA,KACV,IAAIgD,GAAU/C,IAGdD,GAAQqD,KAAOrD,EAAQqD,SACnBD,EAAUV,SACV1C,EAAQqD,KAAKvC,QAAUsC,EAAUE,KAAM,KAE3C,IAAI1C,GAAMX,KAAKG,SAASmD,MAAOvD,EAO/B,OANAY,GAAI4C,KAAM,WACNR,EAAQT,gBAAiB,WAErBtC,KAAKsD,YAGN3C,GAKX6C,QAAU,SAAUzD,GAChB,MAAIC,MAAKM,IAAK,WAAsBa,OAAOsC,OACpCzD,KAAK0D,MAAQlE,SAAS,GAAQO,IAGzC4D,MAAQ,SAAU5D,GACd,MAAIC,MAAKM,IAAK,UAAqBa,OAAOsC,OACnCzD,KAAK0D,MAAQlE,SAAS,EAAMoE,QAAQ,GAAQ7D,IAGvD8D,SAAW,SAAU9D,GACjB,MAAKC,MAAKM,IAAK,WACRN,KAAK0D,MAAQlE,SAAS,GAASO,GADDoB,OAAOsC,QAUhDK,KAAO,SAAUC,EAAS1E,GAEtB,GADA0E,EAAwBC,SAAZD,EAAwB,GAAY,GAC3C/D,KAAKZ,GACN,KAAM,IAAI6E,OAAO,iDAGrB,IAAIC,IAAaC,WAAcnE,KAAKZ,GAChC2E,KACAG,EAASH,SAAU,GAEnB1E,IACA6E,EAAS7E,KAAOA,EAKpB,IAAI0D,GAAU/C,KACV8D,EAAO3C,OAAOiD,KAAMpE,KAAKP,QAASyE,EAEtC,OAAIH,GACOD,EAAKO,KAAM,SAAUC,GACxB,GAAIC,GAAa,GAAI5F,GAAS2F,EAC9B,OAAOC,GAAWC,eACbjB,KAAM,WACHR,EAAQ/B,QAAS,SAAU+B,EAASuB,OAI7CR,EAAKP,KAAM,SAAUe,GACxBvB,EAAQ/B,QAAS,SAAU+B,EAASuB,MAI5CE,aAAe,WACX,GAAIzB,GAAU/C,KACVW,EAAMQ,OAAOsD,QAAS/E,cAAcC,KAAO,6BAA+BK,KAAKZ,GAKnF,OAHAuB,GAAI4C,KAAM,WACNR,EAAQ/B,QAAS,iBAAkB+B,KAEhCpC,GAIX+D,SAAW,WACP,MAAO,WAAa1E,KAAKM,IAAK,MAAS,IAAMN,KAAKM,IAAK,QAAW,OAQ1E3B,GAAQmE,aAAe,IAGvBnE,EAAQgG,eAAiB,SAAyBtE,EAAWN,GASzD,QAAS6E,KAEL,MAAkB,YAAdvE,EACOc,OAAOsD,QAAS/E,cAAcC,KAAO,gCAEzCwB,OAAO0D,KAAMnF,cAAcC,KAAO,iBAAmBU,GAEhE,QAASyE,GAASC,GAEd,MAAOA,IAAeA,EAAYC,MAEtC,QAASC,GAAaF,GAGlB,GAAID,EAASC,GAAiB,QAE1BlD,GAAEc,WAAYuC,KACdA,EAAcA,EAAaH,IAE3BlD,EAAEc,WAAYwC,KACdA,EAAgBA,EAAeJ,GAEnC,IAAI3B,KASJ,OARI8B,GAAYzC,SACZW,EAAKgC,gBAAkBF,EAAY7B,KAAM,MAEzC8B,EAAc1C,SAGdW,EAAKiC,2BAA6BF,EAAc9B,KAAM,MAEnDlC,OAAO0D,KAAMnF,cAAcC,KAAO,iBAAmBoF,EAAY3F,GAAK,aAAegE,KAAMA,IAvCtGrD,EAAUA,KACV,IAAImF,GAAcnF,EAAQmF,gBACtBC,EAAgBpF,EAAQoF,kBAGxBG,EAAKnE,OAAOoE,WACZ1F,EAAc,KAuCd2F,EAAYzF,EAAQyF,WAAaZ,EACjCa,EAAa1F,EAAQ0F,YAAcR,EAGnCS,EAAaF,EAAWnF,EAC5BqF,GAAWnC,KAAM,SAAUoC,GAEvB9F,EAAc8F,EACdL,EAAGM,QAASC,OAAQ,yBAA0BhG,YAAaA,MAE/D6F,EAAWI,KAAM,SAAUnF,GAEvB2E,EAAGS,OAAQpF,EAAK,wBAGpB,IAAIqF,GAAcN,EAAWrB,KAAMoB,EAWnC,OAVAO,GAAY3B,KAAM,SAAUvE,GACxBwF,EAAGM,QAASC,OAAQ,0BAA2BhG,YAAaA,EAAaC,aAAcA,IAEvFwF,EAAGW,QAASpG,EAAaC,KAE7BkG,EAAYF,KAAM,SAAUnF,GAExB2E,EAAGS,OAAQpF,EAAK,wBAA0BoC,QAASlD,MAGhDyF,EAQX,IAAIY,GAAoBtH,SAASuH,WAAWrH,OAAQJ,EAASK,eAAgBD,QAEzE4B,MAAU/B,EAKVc,SAAY2G,OAAO1G,cAAeA,cAAcC,KAAO,KAAQ,gBAG/DC,WAAa,SAAUyG,EAAQtG,GAC3BA,EAAUA,MACVC,KAAKE,IAAK,+BAAgCmB,WAC1CrB,KAAKsG,eAAiBvG,EAAQuG,iBAAkB,EAMhDtG,KAAKuG,kBAGTA,eAAiB,WACb,GAAIC,GAAaxG,IAGjBA,MAAKS,GAAI,iBAAkB,SAAUsC,GACjC/C,KAAKyG,MAAO,iBAAkBD,EAAWF,eAAgBvD,EAAQzC,IAAK,aACjEkG,EAAWF,gBAAkBvD,EAAQzC,IAAK,YAC3CkG,EAAWE,OAAQ3D,KAK3B/C,KAAKS,GAAI,SAAU,SAAUkG,EAAUC,GACnC5G,KAAK6G,QAAS,GAAIlI,GAASiI,UAInCE,OAAS,SAAiB1D,EAAM2D,EAAMC,GAClC,GAAIR,GAAaxG,KACbW,EAAMQ,OAAOsD,QAAS/E,cAAcC,KAAO,6BAC/C,OAAOgB,GAAI4C,KAAM,SAAUqD,GACvB,GAAI7D,GAAU,GAAIpE,GAASiI,KAAaI,MAGxCR,GAAWK,QAAS9D,GACpByD,EAAWxF,QAAS,kBAK5B0D,SAAU,WACN,MAAO,qBAAuB1E,KAAKyC,OAAS,MAKpD,QACI9D,QAAoBA,EACpBuH,kBAAoBA"}