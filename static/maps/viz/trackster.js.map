{"version":3,"file":"trackster.js","sources":["../../src/viz/trackster.js"],"names":["ui","view","browser_router","require","mod_utils","cssLoadFile","define","_","base","tracks","visualization","mod_icon_btn","TracksterUI","Base","extend","initialize","baseURL","this","save_viz","Galaxy","modal","show","title","body","bookmarks","$","each","push","position","children","text","annotation","overview_track_name","overview_drawable","config","get_value","viz_config","to_dict","viewport","chrom","start","low","end","high","overview","ajax","url","galaxy_config","root","type","dataType","data","id","vis_id","dbkey","vis_json","JSON","stringify","success","vis_info","hide","has_changes","window","history","pushState","location","hash","error","buttons","Cancel","createButtonMenu","self","menu","create_icon_buttons_menu","icon_class","on_click","select_datasets","f-dbkey","new_tracks","track","add_drawable","object_from_template","DrawableGroup","name","force_right_panel","css","handle_unsaved_changes","tooltip_config","placement","buttonMenu","add_bookmarks","alert","table_html","Insert","first","val","attr","hda_id","ldda_id","then","i","length","row","add_bookmark","editable","bookmarks_container","new_bookmark","addClass","appendTo","position_div","annotation_div","click","go_to","delete_icon_container","prependTo","slideUp","remove","make_text_editable","num_rows","use_textarea","help_text","create_visualization","view_config","viewport_config","drawables_config","bookmarks_config","TracksterView","header","editor","when","load_chroms_deferred","chrom_info","overview_drawable_name","undefined","change_chrom","drawables","set_overview","bookmark","set_up_router","options","TrackBrowserRouter","Backbone","init_keyboard_nav","document","keyup","e","srcElement","is","which","move_fraction","Math","round","viewport_container","height","scrollTop","Leave without Saving","off","Save","View","$el","append","resize_window","app","view_existing","view_new","container","init_editor","response","template_view_new","Create","create_browser","default_dbkey","focus","select2","html","trigger","gene_region","add_dataset","hda_ldda","data_type","track_data","on","GalaxyApp"],"mappings":"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"}